{
  "permissions": {
    "allow": [
      "Bash(tail:*)",
      "Bash(cd /c/Users/tkota/kanta-app/backend && python -m pytest tests/ -v 2>&1)",
      "Bash(cd /c/Users/tkota/kanta-app/frontend && npm test -- --passWithNoTests 2>&1)",
      "Bash(cd /c/Users/tkota/kanta-app/frontend && npm test 2>&1)",
      "Bash(cd:*)",
      "Bash(gh repo:*)",
      "Bash(git status:*)",
      "Bash(cd /c/Users/tkota/kanta-app && git remote add origin git@github.com:kt22-2/kanta-app.git && git push -u origin main 2>&1)",
      "Bash(sleep 3:*)",
      "Bash(grep 8000:*)",
      "Bash(tasklist:*)",
      "Bash(kill 1999:*)",
      "Bash(grep :8000:*)",
      "Bash(echo:*)",
      "Bash(head:*)",
      "Bash(curl -s \"https://restcountries.com/v3.1/alpha/JP\" | python -c \"import json,sys; d=json.load\\(sys.stdin\\); print\\(list\\(d[0].keys\\(\\)\\) if isinstance\\(d,list\\) else list\\(d.keys\\(\\)\\)\\)\" 2>&1)",
      "Bash(curl:*)",
      "Bash(sleep 2:*)",
      "Bash(cd C:\\\\Users\\\\tkota\\\\kanta-app\\\\backend && python -m pytest tests/ -v 2>&1)",
      "Bash(cd \"C:/Users/tkota/kanta-app/frontend\" && npm test -- --watchAll=false 2>&1)",
      "WebFetch(domain:www.anzen.mofa.go.jp)",
      "WebSearch",
      "WebFetch(domain:www.ezairyu.mofa.go.jp)",
      "Bash(cd /c/Users/tkota/kanta-app/backend && python << 'PYEOF'\nimport asyncio, httpx, re\n\nasync def test\\(\\):\n    url = \"https://www.anzen.mofa.go.jp/info/pcinfectionspothazardinfo_182.html\"\n    async with httpx.AsyncClient\\(timeout=10.0\\) as client:\n        resp = await client.get\\(url, follow_redirects=True\\)\n        raw = resp.content\n        # Shift-JIS でデコード\n        text = raw.decode\\(\"shift-jis\", errors=\"replace\"\\)\n        print\\(\"=== Shift-JIS デコード ===\"\\)\n        # レベルの前後テキストを確認\n        matches = list\\(re.finditer\\(r\"レベル.{0,10}\", text\\)\\)\n        for m in matches[:10]:\n            print\\(repr\\(m.group\\(0\\)\\)\\)\n        print\\(\\)\n        # 全角数字も含む検索\n        levels_ascii = re.findall\\(r\"レベル[　\\\\s]?\\(\\\\d\\)\", text\\)\n        levels_wide  = re.findall\\(r\"レベル[　\\\\s]?\\([１２３４]\\)\", text\\)\n        print\\(\"ASCII digits:\", levels_ascii\\)\n        print\\(\"全角 digits:\", levels_wide\\)\n        print\\(\\)\n        # 最終URL（リダイレクト先）確認\n        print\\(\"Final URL:\", str\\(resp.url\\)\\)\n\nasyncio.run\\(test\\(\\)\\)\nPYEOF)",
      "Bash(cd /c/Users/tkota/kanta-app/backend && python << 'PYEOF'\nimport asyncio, httpx, re, html as _html\n\n# User-Agent なし（実際のサービスと同じ条件）で確認\n_LEVEL_SUMMARIES = {0:\"安全\",1:\"十分注意\",2:\"不要不急\",3:\"渡航中止\",4:\"退避勧告\"}\n\ndef _parse_level_and_summary\\(html_str\\):\n    text = re.sub\\(r\"<[^>]+>\", \" \", html_str\\)\n    text = _html.unescape\\(text\\)\n    text = re.sub\\(r\"\\\\s+\", \" \", text\\).strip\\(\\)\n    levels = [int\\(m\\) for m in re.findall\\(r\"レベル[　\\\\s]?\\(\\\\d\\)\", text\\)]\n    if not levels:\n        if \"危険情報は出ておりません\" in text or \"危険情報は発出されていません\" in text:\n            return 0, _LEVEL_SUMMARIES[0]\n        return 1, _LEVEL_SUMMARIES[1]\n    max_level = max\\(levels\\)\n    match = re.search\\(rf\"レベル[　\\\\s]?{max_level}[^\\\\n]{{0,300}}\", text\\)\n    summary = match.group\\(0\\)[:200] if match else _LEVEL_SUMMARIES[max_level]\n    return max_level, summary\n\nasync def test\\(label, mofa_code\\):\n    url = f\"https://www.anzen.mofa.go.jp/info/pcinfectionspothazardinfo_{mofa_code:03d}.html\"\n    async with httpx.AsyncClient\\(timeout=10.0\\) as client:  # User-Agent なし\n        resp = await client.get\\(url, follow_redirects=True\\)\n        text = resp.content.decode\\(\"utf-8\", errors=\"replace\"\\)\n        level, summary = _parse_level_and_summary\\(text\\)\n        print\\(f\"{label}: level={level}\"\\)\n\nasync def main\\(\\):\n    await test\\(\"UA \\(Ukraine\\) - 期待: 4\", 182\\)\n    await test\\(\"SY \\(Syria\\)   - 期待: 4\", 51\\)\n\nasyncio.run\\(main\\(\\)\\)\nPYEOF)",
      "Bash(netstat:*)",
      "Bash(taskkill:*)",
      "Bash(cmd:*)",
      "Bash(curl -s http://localhost:8001/api/countries/UA/safety -o \"C:/Users/tkota/ua_resp.json\" && python << 'PYEOF'\nimport json, sys\nwith open\\('C:/Users/tkota/ua_resp.json', 'r', encoding='utf-8'\\) as f:\n    raw = f.read\\(\\)\ndata = json.loads\\(raw\\)\nprint\\('level:', data['level']\\)\nprint\\('level_label:', data['level_label']\\)\nprint\\('severity:', data['details'][0]['severity']\\)\nPYEOF)",
      "Bash(python:*)",
      "Bash(grep:*)",
      "Bash(kill:*)",
      "Bash(powershell:*)",
      "Bash(wsl ps aux | grep -i uvicorn 2>&1)",
      "Bash(wsl kill:*)",
      "Bash(wsl ss:*)",
      "Bash(wsl curl:*)",
      "Bash(grep nameserver:*)",
      "Bash(wsl ip:*)",
      "Bash(wsl netstat:*)",
      "Bash(wsl:*)",
      "Bash(python3:*)"
    ]
  }
}
